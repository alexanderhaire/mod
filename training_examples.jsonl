{"timestamp": 1764087162, "prompt": "what is our usage on NPKACEK", "summary": "Calculates the total usage for item NPKACEK based on transaction details.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKACEK.", "sql": "SELECT SUM(t.TRXQTY) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND t.TRXQTY < 0", "params": ["NPKACEK"], "entities": {"item": "NPKACEK", "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764087689, "prompt": "what is our usage on NPKACEK", "summary": "Calculates the total usage for item NPKACEK.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKACEK.", "sql": "SELECT SUM(t.TRXQTY) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND t.TRXQTY < 0", "params": ["NPKACEK"], "entities": {"item": "NPKACEK", "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764091326, "prompt": "what is our historical usage on NPKACEK over the past couple of years?", "summary": "Calculates the total historical usage for item NPKACEK over the past couple of years, grouped by month and year.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKACEK.", "sql": "SELECT YEAR(h.DOCDATE) AS Year, MONTH(h.DOCDATE) AS Month, SUM(t.TRXQTY) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND t.TRXQTY < 0 AND h.DOCDATE >= '2023-01-01' AND h.DOCDATE < '2025-01-01' GROUP BY YEAR(h.DOCDATE), MONTH(h.DOCDATE) ORDER BY Year, Month", "params": ["NPKACEK"], "entities": {"item": "NPKACEK", "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764091444, "prompt": "what is usage on NPKACEK in december", "summary": "Calculates the total usage for item NPKACEK for December 2025.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKACEK.", "sql": "SELECT SUM(t.TRXQTY) AS UsageForDecember FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND t.TRXQTY < 0 AND h.DOCDATE >= ? AND h.DOCDATE <= ?", "params": ["NPKACEK", "2025-12-01", "2025-12-31"], "entities": {"item": "NPKACEK", "month": 12, "year": 2025, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764096521, "prompt": "What is our current usage on NPKACEK? historically?", "summary": "Calculates the total historical usage for item NPKACEK, aggregated by month.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKACEK.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(t.TRXQTY) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND t.TRXQTY < 0 GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKACEK"], "entities": {"item": "NPKACEK", "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764096865, "prompt": "Can you show me the growth rate of NPKACEK as a graph?", "summary": "Calculates the annual growth rate for NPKACEK from 2015 to 2023 so it can be plotted (Year, PreviousYearUsage, GrowthRate).", "sql": "WITH UsageData AS (SELECT YEAR(h.DOCDATE) AS Year, SUM(t.TRXQTY) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND t.TRXQTY < 0 AND h.DOCDATE >= '2015-01-01' AND h.DOCDATE <= '2023-12-31' GROUP BY YEAR(h.DOCDATE)), GrowthCalc AS (SELECT Year, TotalUsage, LAG(TotalUsage) OVER (ORDER BY Year) AS PreviousYearUsage FROM UsageData) SELECT Year, TotalUsage, PreviousYearUsage, CASE WHEN PreviousYearUsage IS NULL OR PreviousYearUsage = 0 THEN NULL ELSE (TotalUsage - PreviousYearUsage) * 100.0 / PreviousYearUsage END AS GrowthRate FROM GrowthCalc ORDER BY Year", "params": ["NPKACEK"], "entities": {"item": "NPKACEK", "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764096914, "prompt": "what is the growth rate of NPKACEK", "summary": "Calculates the annual growth rate of usage for item NPKACEK by comparing total usage year over year.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKACEK.", "sql": "WITH UsageData AS (SELECT YEAR(h.DOCDATE) AS Year, SUM(t.TRXQTY) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND t.TRXQTY < 0 GROUP BY YEAR(h.DOCDATE)) SELECT Year, TotalUsage, LAG(TotalUsage) OVER (ORDER BY Year) AS PreviousYearUsage, CASE WHEN LAG(TotalUsage) OVER (ORDER BY Year) IS NULL THEN NULL ELSE (TotalUsage - LAG(TotalUsage) OVER (ORDER BY Year)) * 100.0 / LAG(TotalUsage) OVER (ORDER BY Year) END AS GrowthRate FROM UsageData ORDER BY Year", "params": ["NPKACEK"], "entities": {"item": "NPKACEK", "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764097168, "prompt": "What is nour growth rate of SOARBLM02", "summary": "Calculates the annual growth rate of usage for SOARBLM02 from 2015 to 2023.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for SOARBLM02.", "sql": "WITH YearlyUsage AS (SELECT YEAR(h.DOCDATE) AS Year, SUM(t.TRXQTY) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= '2015-01-01' AND h.DOCDATE <= '2023-12-31' GROUP BY YEAR(h.DOCDATE)) SELECT Year, TotalUsage, LAG(TotalUsage) OVER (ORDER BY Year) AS PreviousYearUsage, CASE WHEN LAG(TotalUsage) OVER (ORDER BY Year) IS NULL THEN NULL ELSE (TotalUsage - LAG(TotalUsage) OVER (ORDER BY Year)) * 100.0 / LAG(TotalUsage) OVER (ORDER BY Year) END AS GrowthRate FROM YearlyUsage ORDER BY Year", "params": ["SOARBLM02"], "entities": {"item": "SOARBLM02", "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764098524, "prompt": "What is our Growth rate of NPKACEK", "summary": "Calculates the growth rate of sales for item NPKACEK from January to December 2024.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKACEK.", "sql": "WITH MonthlySales AS (SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN l.SOPTYPE = 4 THEN -ABS(l.QUANTITY) ELSE ABS(l.QUANTITY) END) AS SalesQuantity FROM SOP30300 l JOIN SOP30200 h ON h.SOPTYPE = l.SOPTYPE AND h.SOPNUMBE = l.SOPNUMBE WHERE l.ITEMNMBR = ? AND h.DOCDATE >= '2024-01-01' AND h.DOCDATE <= '2024-12-31' AND l.SOPTYPE IN (3, 4) GROUP BY MONTH(h.DOCDATE)), TotalSales AS (SELECT SUM(SalesQuantity) AS Total FROM MonthlySales) SELECT (SELECT SalesQuantity FROM MonthlySales WHERE Month = 1) AS JanuarySales, (SELECT SalesQuantity FROM MonthlySales WHERE Month = 12) AS DecemberSales, (SELECT (DecemberSales - JanuarySales) / NULLIF(JanuarySales, 0) * 100 AS GrowthRate) FROM (SELECT (SELECT SalesQuantity FROM MonthlySales WHERE Month = 1) AS JanuarySales, (SELECT SalesQuantity FROM MonthlySales WHERE Month = 12) AS DecemberSales) AS GrowthCalculation", "params": ["NPKACEK"], "entities": {"item": "NPKACEK", "intent": "growth rate"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764098551, "prompt": "what is our growth rate on usage of NPKACEK?", "summary": "The usage of **NPKACEK** showed no recorded sales in **January** or **December**, indicating a stagnant trend throughout the year. The absence of data suggests a potential need for strategic review to boost engagement and sales in the upcoming months.", "sql": "WITH MonthlySales AS (SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN l.SOPTYPE = 4 THEN -ABS(l.QUANTITY) ELSE ABS(l.QUANTITY) END) AS SalesQuantity FROM SOP30300 l JOIN SOP30200 h ON h.SOPTYPE = l.SOPTYPE AND h.SOPNUMBE = l.SOPNUMBE WHERE l.ITEMNMBR = ? AND h.DOCDATE >= '2024-01-01' AND h.DOCDATE <= '2024-12-31' AND l.SOPTYPE IN (3, 4) GROUP BY MONTH(h.DOCDATE)), TotalSales AS (SELECT SUM(SalesQuantity) AS Total FROM MonthlySales) SELECT (SELECT SalesQuantity FROM MonthlySales WHERE Month = 1) AS JanuarySales, (SELECT SalesQuantity FROM MonthlySales WHERE Month = 12) AS DecemberSales, (SELECT (DecemberSales - JanuarySales) / NULLIF(JanuarySales, 0) * 100 AS GrowthRate) FROM (SELECT (SELECT SalesQuantity FROM MonthlySales WHERE Month = 1) AS JanuarySales, (SELECT SalesQuantity FROM MonthlySales WHERE Month = 12) AS DecemberSales) AS GrowthCalculation", "params": ["NPKACEK"], "entities": {"item": "NPKACEK", "intent": "growth rate"}, "route": "erp_sql", "source": "Calculates the growth rate of sales for item NPKACEK from January to December 2024.", "meta": {"user": "ah", "chat_id": "chat-2", "handler_name": "Calculates the growth rate of sales for item NPKACEK from January to December 2024.", "route": "erp_sql"}}
{"timestamp": 1764103524, "prompt": "What should we buy in december?", "summary": "For December 2025, demand from **shipped invoices in December 2024 (fallback because December 2025 has no open orders yet)** was exploded through BOM production data (BM010115) with standard BOM fallback (39 manufacturing parents, 85 fallback) and netted against on-hand and open PO supply. **No net raw-material purchases are required; on-hand and open POs cover projected demand.**", "sql": "{'demand_sql': \"SELECT l.ITEMNMBR, SUM(l.QUANTITY) AS DemandQty FROM SOP10200 l JOIN SOP10100 h ON l.SOPNUMBE = h.SOPNUMBE WHERE h.DOCDATE BETWEEN '2025-12-01' AND '2025-12-31' GROUP BY l.ITEMNMBR\", 'fallback_demand_sql': \"SELECT l.ITEMNMBR, SUM(CASE WHEN l.SOPTYPE = 4 THEN -ABS(l.QUANTITY) ELSE ABS(l.QUANTITY) END) AS DemandQty FROM SOP30300 l JOIN SOP30200 h ON h.SOPTYPE = l.SOPTYPE AND h.SOPNUMBE = l.SOPNUMBE WHERE h.DOCDATE BETWEEN '2024-12-01' AND '2024-12-31' AND l.SOPTYPE IN (3, 4) GROUP BY l.ITEMNMBR\", 'mfg_bom_sql': \"SELECT PPN_I as BOMParent, CPN_I as RawMaterial, SUM(QUANTITY_I) as Design_Qty FROM BM010115 WHERE PPN_I IN ('ALMBGRE00', 'BEYETI00', 'CAMMO00', 'CEIABIO00', 'CEIACEC+00', 'CEIAGREEN00', 'CEIASOILMAX00', 'CHEGLUCOGR00', 'DEPOSIT', 'FLO00', 'FLO828+00', 'FLOCATS00', 'FLOKTS00', 'FLOMOLA00', 'FLOPHOS00', 'FLOTURF00', 'FLOU00', 'GOLD00', 'GOLDBOR00', 'GOLDCA00', 'GOLDFE00', 'GOLDMICRO00', 'GOLDPCS00', 'GOLDT&O00', 'GPBLACK+00', 'GPGRCMN00', 'GPIRONPRO00', 'GPNG00', 'GPNZONE', 'GRO00', 'GROCA00', 'GROCAHA00', 'GROMN00', 'GV00', 'GVBIOOAK00', 'GVCAL00', 'GVGR8THIO00', 'JRM00', 'JRMFERRO00', 'JRMSUPERMN00', 'LEAF', 'MAC028XV', 'MAC229YM', 'MAC229YM00', 'MAC406XR', 'MAC406YB00', 'MAC426YM', 'MAC428YM00', 'MAC527YM00', 'MAC527YZ1I', 'MAC528YM00', 'MAC528YZ', 'MAC608YB00', 'MAC626YM00', 'MAC628YM00', 'MAC628YM8M', 'MAC628YZ00', 'MAC634XH', 'MAC707YB10M', 'MAC707YB00', 'MAC727YM00', 'MAC845YX', 'MAC909XS', 'MAC927YM00', 'MISCCHG', 'MRCCCN00', 'NEMATODE', 'NPKAWAKEN', 'NPKKSIO2HI', 'OMFISHEM00', 'PHURYMG00', 'PHYLO00', 'SO4CU', 'SOARBLM00', 'SOARMIC00', 'SOARPOT00', 'SOIL', 'SORCA00', 'USCBIOPX00', 'USCMANPLX+00', 'USCMICMIX00', 'ZON00', 'ZON5020ACE00', 'ZONN00', 'ZZ30GAL') GROUP BY PPN_I, CPN_I\", 'bom_sql': \"SELECT ITEMNMBR as BOMParent, CMPTITNM as RawMaterial, Design_Qty FROM BM00111 WHERE ITEMNMBR IN ('ALMBGRE00', 'BEYETI00', 'CAMMO00', 'CEIABIO00', 'CEIACEC+00', 'CEIAGREEN00', 'CEIASOILMAX00', 'CHEGLUCOGR00', 'DEPOSIT', 'FLO00', 'FLO828+00', 'FLOCATS00', 'FLOKTS00', 'FLOMOLA00', 'FLOPHOS00', 'FLOTURF00', 'FLOU00', 'GOLD00', 'GOLDBOR00', 'GOLDCA00', 'GOLDFE00', 'GOLDMICRO00', 'GOLDPCS00', 'GOLDT&O00', 'GPBLACK+00', 'GPGRCMN00', 'GPIRONPRO00', 'GPNG00', 'GPNZONE', 'GRO00', 'GROCA00', 'GROCAHA00', 'GROMN00', 'GV00', 'GVBIOOAK00', 'GVCAL00', 'GVGR8THIO00', 'JRM00', 'JRMFERRO00', 'JRMSUPERMN00', 'LEAF', 'MAC028XV', 'MAC229YM', 'MAC229YM00', 'MAC406XR', 'MAC406YB00', 'MAC426YM', 'MAC428YM00', 'MAC527YM00', 'MAC527YZ1I', 'MAC528YM00', 'MAC528YZ', 'MAC608YB00', 'MAC626YM00', 'MAC628YM00', 'MAC628YM8M', 'MAC628YZ00', 'MAC634XH', 'MAC707YB10M', 'MAC707YB00', 'MAC727YM00', 'MAC845YX', 'MAC909XS', 'MAC927YM00', 'MISCCHG', 'MRCCCN00', 'NEMATODE', 'NPKAWAKEN', 'NPKKSIO2HI', 'OMFISHEM00', 'PHURYMG00', 'PHYLO00', 'SO4CU', 'SOARBLM00', 'SOARMIC00', 'SOARPOT00', 'SOIL', 'SORCA00', 'USCBIOPX00', 'USCMANPLX+00', 'USCMICMIX00', 'ZON00', 'ZON5020ACE00', 'ZONN00', 'ZZ30GAL')\", 'on_hand_sql': \"SELECT ITEMNMBR, SUM(QTYONHND) AS OnHand FROM IV00102 WHERE ITEMNMBR IN ('AGBTHROOT02                    ', 'CHEACETIC                      ', 'CHECITRIC                      ', 'CHEGLUCO                       ', 'CHEGLUCOGR50CDI                ', 'CHEH2SO4                       ', 'CHELIGLIQ                      ', 'CHEMOLASS                      ', 'CHESGLITE                      ', 'CHESORB                        ', 'EDTAFEHE                       ', 'EDTAMG                         ', 'EDTAMN                         ', 'EDTAZN                         ', 'FLO15006250                    ', 'FLOFE6+250                     ', 'FLOFE6250                      ', 'GOLD068640250                  ', 'GPRHIZ250                      ', 'GRPALGAE                       ', 'GRPFISHEM                      ', 'GRPFULVIC                      ', 'GRPGABA                        ', 'GRPHUMICLIQ                    ', 'GRPLISIK                       ', 'GRPSEAEX                       ', 'GRPSEAWEED                     ', 'GRPTRAINER                     ', 'GRPVIT ... [truncated 5111 chars]", "params": null, "entities": {"month": 12, "year": 2025, "intent": "planning"}, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764166857, "prompt": "What raw materials had the highest usage in december january febuary march and april of 2024?", "summary": "In **December 2024**, **Hot Water** usage peaked at **1,373,407** units, followed closely by **KNO3 Solution 3-0-11** at **1,020,889**. As the year progressed into **January**, usage dipped slightly but remained high. By **April**, **Hot Water** usage decreased to **801,695**, indicating a downward trend after a strong winter, while **KNO3 Solution 3-0-11** continued to show robust demand.", "sql": "WITH usage AS ( SELECT YEAR(h.DOCDATE) AS Year, MONTH(h.DOCDATE) AS Month, t.ITEMNMBR, i.ITEMDESC, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS UsageQty FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP LEFT JOIN IV00101 i ON i.ITEMNMBR = t.ITEMNMBR WHERE ((YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 12) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 1) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 2) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 3) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 4)) GROUP BY YEAR(h.DOCDATE), MONTH(h.DOCDATE), t.ITEMNMBR, i.ITEMDESC HAVING SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) > 0 ), ranked AS ( SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty, ROW_NUMBER() OVER (PARTITION BY Year, Month ORDER BY UsageQty DESC) AS rn FROM usage ) SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty FROM ranked WHERE rn <= 5 ORDER BY Year, Month, UsageQty DESC", "params": null, "entities": {"year": 2024, "intent": "usage"}, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764167349, "prompt": "What raw materials had the highest usage in december january febuary march and april of 2024", "summary": "In **December 2024**, **Hot Water** usage peaked at **1,373,407** units, closely followed by **KNO3 Solution 3-0-11** at **1,020,889**. This trend continued into **January** with **970,257**, rising to **1,110,562** in **February**. However, by **April**, usage dipped to **801,695**, marking a decline from the winter highs, showcasing a seasonal fluctuation in material consumption.", "sql": "WITH usage AS ( SELECT YEAR(h.DOCDATE) AS Year, MONTH(h.DOCDATE) AS Month, t.ITEMNMBR, i.ITEMDESC, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS UsageQty FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP LEFT JOIN IV00101 i ON i.ITEMNMBR = t.ITEMNMBR WHERE ((YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 12) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 1) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 2) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 3) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 4)) GROUP BY YEAR(h.DOCDATE), MONTH(h.DOCDATE), t.ITEMNMBR, i.ITEMDESC HAVING SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) > 0 ), ranked AS ( SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty, ROW_NUMBER() OVER (PARTITION BY Year, Month ORDER BY UsageQty DESC) AS rn FROM usage ) SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty FROM ranked WHERE rn <= 5 ORDER BY Year, Month, UsageQty DESC", "params": null, "entities": {"year": 2024, "intent": "usage"}, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764167456, "prompt": "show me a chart of What raw materials had the highest usage in december 2023 january febuary march and april of 2024", "summary": "In **December 2023**, **Hot Water** surged to a remarkable **1,040,712** units, leading the usage chart, followed by **KNO3 Solution 3-0-11** at **739,920**. However, by **April 2024**, usage dipped significantly, with **Hot Water** dropping to **716,978**, and **KNO3 Solution** also declining to **377,830**, indicating a downward trend in raw material consumption as the year progressed.", "sql": "WITH usage AS ( SELECT YEAR(h.DOCDATE) AS Year, MONTH(h.DOCDATE) AS Month, t.ITEMNMBR, i.ITEMDESC, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS UsageQty FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP LEFT JOIN IV00101 i ON i.ITEMNMBR = t.ITEMNMBR WHERE ((YEAR(h.DOCDATE) = 2023 AND MONTH(h.DOCDATE) = 12) OR (YEAR(h.DOCDATE) = 2023 AND MONTH(h.DOCDATE) = 1) OR (YEAR(h.DOCDATE) = 2023 AND MONTH(h.DOCDATE) = 2) OR (YEAR(h.DOCDATE) = 2023 AND MONTH(h.DOCDATE) = 3) OR (YEAR(h.DOCDATE) = 2023 AND MONTH(h.DOCDATE) = 4)) GROUP BY YEAR(h.DOCDATE), MONTH(h.DOCDATE), t.ITEMNMBR, i.ITEMDESC HAVING SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) > 0 ), ranked AS ( SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty, ROW_NUMBER() OVER (PARTITION BY Year, Month ORDER BY UsageQty DESC) AS rn FROM usage ) SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty FROM ranked WHERE rn <= 5 ORDER BY Year, Month, UsageQty DESC", "params": null, "entities": {"year": 2023, "intent": "usage"}, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764167835, "prompt": "What raw materials had the highest usage in december january febuary march and april of 2024?", "summary": "**December 2024** saw a peak in usage with **Hot Water** leading at **1,373,407** units, followed closely by **KNO3 Solution 3-0-11** at **1,020,890**. In contrast, **April 2024** experienced a dip, where usage dropped to **801,695** for Hot Water. Overall, the trend shows a strong demand for Hot Water, consistently ranking high across the months.", "sql": "WITH usage AS ( SELECT YEAR(h.DOCDATE) AS Year, MONTH(h.DOCDATE) AS Month, t.ITEMNMBR, i.ITEMDESC, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS UsageQty FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP LEFT JOIN IV00101 i ON i.ITEMNMBR = t.ITEMNMBR WHERE ((YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 12) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 1) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 2) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 3) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 4)) GROUP BY YEAR(h.DOCDATE), MONTH(h.DOCDATE), t.ITEMNMBR, i.ITEMDESC HAVING SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) > 0 ), ranked AS ( SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty, ROW_NUMBER() OVER (PARTITION BY Year, Month ORDER BY UsageQty DESC) AS rn FROM usage ) SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty FROM ranked WHERE rn <= 5 ORDER BY Year, Month, UsageQty DESC", "params": null, "entities": {"years": [2024], "months": [12, 1, 2, 3, 4], "intent": "usage"}, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764167915, "prompt": "What raw materials had the highest usage in december january febuary march and april of 2024?", "summary": "In **December 2024**, **Hot Water** usage peaked at **1,373,407** units, followed closely by **KNO3 Solution 3-0-11** at **1,020,889**. This trend continued into **January**, where Hot Water remained dominant at **970,257**. However, by **April**, usage dipped to **801,695**, indicating a downward shift, while KNO3 Solution showed resilience, maintaining significant usage throughout these months.", "sql": "WITH usage AS ( SELECT YEAR(h.DOCDATE) AS Year, MONTH(h.DOCDATE) AS Month, t.ITEMNMBR, i.ITEMDESC, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS UsageQty FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP LEFT JOIN IV00101 i ON i.ITEMNMBR = t.ITEMNMBR WHERE ((YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 12) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 1) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 2) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 3) OR (YEAR(h.DOCDATE) = 2024 AND MONTH(h.DOCDATE) = 4)) GROUP BY YEAR(h.DOCDATE), MONTH(h.DOCDATE), t.ITEMNMBR, i.ITEMDESC HAVING SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) > 0 ), ranked AS ( SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty, ROW_NUMBER() OVER (PARTITION BY Year, Month ORDER BY UsageQty DESC) AS rn FROM usage ) SELECT Year, Month, ITEMNMBR, ITEMDESC, UsageQty FROM ranked WHERE rn <= 5 ORDER BY Year, Month, UsageQty DESC", "params": null, "entities": {"years": [2024], "months": [12, 1, 2, 3, 4], "intent": "usage"}, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764171705, "prompt": "What items had the highest usage in 2024?", "summary": "**Calcium Nitrate 11%** dominated 2024 with an impressive usage of **503.8 billion** units, significantly outpacing other materials. Following behind, **Hot Water** was utilized at **40.3 billion** units, while the lesser-used **2.5 Gallon Jug** saw only **2.4 billion** units. This stark contrast highlights the overwhelming reliance on key resources, particularly in the first half of the year.", "sql": "SELECT TOP 200 t.ITEMNMBR, i.ITEMDESC, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS UsageQty FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP LEFT JOIN IV00101 i ON i.ITEMNMBR = t.ITEMNMBR WHERE 1=1  GROUP BY t.ITEMNMBR, i.ITEMDESC HAVING SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) > 0 ORDER BY UsageQty DESC", "params": null, "entities": {"intent": "usage"}, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764173684, "prompt": "What is our usage on NPK11370 in December Historically", "summary": "Calculates the total usage for item NPK11370 for December 2025.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK11370. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(t.TRXQTY) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND t.TRXQTY < 0 AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPK11370", "2025-12-01", "2025-12-31"], "entities": {"item": "NPK11370", "month": 12, "year": 2025, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764176623, "prompt": "Identify items with declining sales", "summary": "Identifies items with declining sales trends (>10% drop) by comparing early 3-month average vs recent 3-month average over the last 6 months.", "sql": "WITH MonthlySales AS (SELECT l.ITEMNMBR, MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN l.SOPTYPE = 4 THEN -ABS(l.QUANTITY) ELSE ABS(l.QUANTITY) END) AS Qty FROM SOP30300 l JOIN SOP30200 h ON h.SOPTYPE = l.SOPTYPE AND h.SOPNUMBE = l.SOPNUMBE WHERE h.DOCDATE >= DATEADD(month, -6, ?) AND l.SOPTYPE IN (3, 4) GROUP BY l.ITEMNMBR, MONTH(h.DOCDATE)), FirstLast AS (SELECT ITEMNMBR, AVG(CASE WHEN Month <= 3 THEN Qty END) AS Early3MonthAvg, AVG(CASE WHEN Month > 3 THEN Qty END) AS Recent3MonthAvg FROM MonthlySales GROUP BY ITEMNMBR), Trending AS (SELECT ITEMNMBR, Early3MonthAvg, Recent3MonthAvg, (Recent3MonthAvg - Early3MonthAvg) / NULLIF(Early3MonthAvg, 0) * 100 AS PercentChange FROM FirstLast WHERE Early3MonthAvg > 0) SELECT TOP 50 t.ITEMNMBR, i.ITEMDESC, t.Early3MonthAvg AS EarlyAvg, t.Recent3MonthAvg AS RecentAvg, t.PercentChange FROM Trending t LEFT JOIN IV00101 i ON t.ITEMNMBR = i.ITEMNMBR WHERE t.PercentChange < -10 ORDER BY t.PercentChange ASC", "params": ["2025-05-20"], "entities": {"intent": "trend_analysis", "trend": "declining"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764176641, "prompt": "Retrieve the demand forecast for the finished goods identified in step 1.", "summary": "Retrieves the demand forecast for components of the finished goods identified by item NPK3011.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764180564, "prompt": "what should we buy in January?", "summary": "**Purchasing Plan for January 2025**  \nFound **131 items** with projected shortages.  \nDemand is the greater of Firm Orders or Forecast (90-day avg \u00f7 3).", "sql": "WITH SalesDemand AS ( SELECT d.ITEMNMBR, SUM(d.QUANTITY) as DemandQty FROM SOP10200 d JOIN SOP10100 h ON d.SOPNUMBE = h.SOPNUMBE WHERE h.REQSHIPDATE BETWEEN 2025-11-26 AND 2025-01-31 AND h.SOPTYPE = 2 -- Orders GROUP BY d.ITEMNMBR ), PurchaseSupply AS ( SELECT l.ITEMNMBR, SUM(l.QTYORDER - l.QTYCANCE) as SupplyQty FROM POP10110 l WHERE l.PRMSHPDTE BETWEEN 2025-11-26 AND 2025-01-31 AND l.POLNESTA = 1 -- New GROUP BY l.ITEMNMBR ), HistoricalUsage AS ( SELECT t.ITEMNMBR, ABS(SUM(t.TRXQTY)) as Usage90Days FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE h.DOCDATE BETWEEN 2025-08-28 AND 2025-11-26 AND t.TRXQTY < 0 GROUP BY t.ITEMNMBR ), ItemStock AS ( SELECT ITEMNMBR, SUM(QTYONHND) as TotalOnHand, SUM(ATYALLOC) as TotalAllocated FROM IV00102 GROUP BY ITEMNMBR ) SELECT TOP 200 i.ITEMNMBR, i.ITEMDESC, ISNULL(stk.TotalOnHand, 0) AS OnHand, ISNULL(stk.TotalAllocated, 0) AS Allocated, ISNULL(stk.TotalOnHand, 0) - ISNULL(stk.TotalAllocated, 0) AS CurrentFreeStock, ISNULL(d.DemandQty, 0) AS FirmDemand, ISNULL(hist.Usage90Days / 3, 0) AS MonthlyForecast, ISNULL(s.SupplyQty, 0) AS OnOrder,  -- Projected Demand = Max of Firm or Forecast CASE WHEN ISNULL(d.DemandQty, 0) > ISNULL(hist.Usage90Days / 3, 0) THEN ISNULL(d.DemandQty, 0) ELSE ISNULL(hist.Usage90Days / 3, 0) END AS ProjectedDemand,  -- Projected Balance = Free Stock + On Order - Projected Demand (ISNULL(stk.TotalOnHand, 0) - ISNULL(stk.TotalAllocated, 0)) + ISNULL(s.SupplyQty, 0) - CASE WHEN ISNULL(d.DemandQty, 0) > ISNULL(hist.Usage90Days / 3, 0) THEN ISNULL(d.DemandQty, 0) ELSE ISNULL(hist.Usage90Days / 3, 0) END AS ProjectedBalance,  -- Shortage = How much we're short CASE WHEN (ISNULL(stk.TotalOnHand, 0) - ISNULL(stk.TotalAllocated, 0)) + ISNULL(s.SupplyQty, 0) < CASE WHEN ISNULL(d.DemandQty, 0) > ISNULL(hist.Usage90Days / 3, 0) THEN ISNULL(d.DemandQty, 0) ELSE ISNULL(hist.Usage90Days / 3, 0) END THEN CASE WHEN ISNULL(d.DemandQty, 0) > ISNULL(hist.Usage90Days / 3, 0) THEN ISNULL(d.DemandQty, 0) ELSE ISNULL(hist.Usage90Days / 3, 0) END - (ISNULL(stk.TotalOnHand, 0) - ISNULL(stk.TotalAllocated, 0)) - ISNULL(s.SupplyQty, 0) ELSE 0 END AS SuggestedBuyQty FROM IV00101 i LEFT JOIN ItemStock stk ON i.ITEMNMBR = stk.ITEMNMBR LEFT JOIN SalesDemand d ON d.ITEMNMBR = i.ITEMNMBR LEFT JOIN PurchaseSupply s ON s.ITEMNMBR = i.ITEMNMBR LEFT JOIN HistoricalUsage hist ON hist.ITEMNMBR = i.ITEMNMBR WHERE i.ITEMTYPE = 1 -- Sales Inventory AND (ISNULL(d.DemandQty, 0) > 0 OR ISNULL(hist.Usage90Days, 0) > 0) ORDER BY SuggestedBuyQty DESC, ProjectedBalance ASC", "params": null, "entities": {"intent": "planning", "month": 1, "year": 2025, "target_date": "2025-01-31"}, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764180657, "prompt": "tell me some insights about our data", "summary": "Provides insights into the total number of items, active items with stock, inactive items, and the average standard cost of items.", "sql": "SELECT COUNT(DISTINCT i.ITEMNMBR) AS TotalItems, SUM(CASE WHEN i.ITEMNMBR IS NOT NULL THEN 1 ELSE 0 END) AS ActiveItems, SUM(CASE WHEN i.ITEMNMBR IS NULL THEN 1 ELSE 0 END) AS InactiveItems, AVG(i.STNDCOST) AS AverageStandardCost FROM IV00101 i LEFT JOIN IV00102 s ON i.ITEMNMBR = s.ITEMNMBR WHERE s.QTYONHND > 0", "params": [], "entities": {"intent": "insights"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764180992, "prompt": "Find declining items, then show BOM", "summary": "Executed dynamic handler for: Provides insights into the total number of items, active items with stock, inactive items, and the average standard cost of items.", "sql": "SELECT COUNT(DISTINCT i.ITEMNMBR) AS TotalItems, SUM(CASE WHEN i.ITEMNMBR IS NOT NULL THEN 1 ELSE 0 END) AS ActiveItems, SUM(CASE WHEN i.ITEMNMBR IS NULL THEN 1 ELSE 0 END) AS InactiveItems, AVG(i.STNDCOST) AS AverageStandardCost FROM IV00101 i LEFT JOIN IV00102 s ON i.ITEMNMBR = s.ITEMNMBR WHERE s.QTYONHND > 0", "params": [], "entities": {"intent": "insights"}, "route": null, "source": "Provides insights into the total number of items, active items with stock, inactive items, and the average standard cost of items.", "meta": {"user": "ah", "chat_id": "chat-1", "handler_name": "Provides insights into the total number of items, active items with stock, inactive items, and the average standard cost of items."}}
{"timestamp": 1764609709, "prompt": "what standard costs are lower than our current cost", "summary": null, "sql": "SELECT ITEMNMBR, ITEMDESC, STNDCOST FROM IV00101 WHERE STNDCOST < 'CURRCOST'", "params": null, "entities": null, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764609840, "prompt": "what standard costs are lower than our current cost", "summary": null, "sql": "SELECT ITEMNMBR, ITEMDESC, STNDCOST FROM IV00101 WHERE STNDCOST < 'CURRCOST'", "params": null, "entities": null, "route": "erp_sql", "source": "erp_sql", "meta": {"user": "ah", "chat_id": "chat-1", "route": "erp_sql"}}
{"timestamp": 1764611617, "prompt": "what is our usage on NPKACEK in december", "summary": "Executed dynamic handler for: Calculates the total usage for item NPKACEK.", "sql": "SELECT SUM(t.TRXQTY) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND t.TRXQTY < 0", "params": ["NPKACEK"], "entities": {"item": "NPKACEK", "intent": "report"}, "route": "erp_sql", "source": "Calculates the total usage for item NPKACEK.", "meta": {"user": "ah", "chat_id": "chat-1", "handler_name": "Calculates the total usage for item NPKACEK.", "route": "erp_sql"}}
{"timestamp": 1764862227, "prompt": "How are we on Boric Acid?", "summary": "Retrieves the total usage and current stock for Boric Acid, along with the days of coverage based on recent usage.", "sql": "SELECT i.ITEMNMBR, i.ITEMDESC, ISNULL(s.TotalUsage, 0) AS TotalUsage, ISNULL(cs.FreeStock, 0) AS CurrentStock, CASE WHEN ISNULL(s.TotalUsage, 0) > 0 THEN cs.FreeStock / NULLIF(s.TotalUsage, 0) ELSE 0 END AS DaysOfCoverage FROM IV00101 i LEFT JOIN (SELECT t.ITEMNMBR, ABS(SUM(t.TRXQTY)) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= DATEADD(month, -3, ?) AND t.TRXQTY < 0 GROUP BY t.ITEMNMBR) s ON i.ITEMNMBR = s.ITEMNMBR LEFT JOIN (SELECT ITEMNMBR, SUM(QTYONHND - ATYALLOC) AS FreeStock FROM IV00102 GROUP BY ITEMNMBR) cs ON i.ITEMNMBR = cs.ITEMNMBR WHERE i.ITEMNMBR = ?", "params": ["BORICACID", "2025-11-20", "BORICACID"], "entities": {"item": "Boric Acid"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764863520, "prompt": "Analyze monthly usage for SO4BORIC", "summary": "Calculates the total monthly usage for item SO4BORIC.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["SO4BORIC"], "entities": {"item": "SO4BORIC", "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764863532, "prompt": "Calculate when the current stock of 74680 gallons will be depleted based on the monthly usage data", "summary": "Calculates the estimated number of months until the current stock of 74680 gallons will be depleted based on average monthly usage data for item SO4BORIC.", "sql": "WITH MonthlyUsage AS (SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? GROUP BY MONTH(h.DOCDATE)), AverageMonthlyUsage AS (SELECT AVG(TotalUsage) AS AvgUsage FROM MonthlyUsage) SELECT 74680 / NULLIF(AvgUsage, 0) AS MonthsUntilDepletion FROM AverageMonthlyUsage", "params": ["SO4BORIC"], "entities": {"item": "SO4BORIC", "current_stock": 74680, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764942550, "prompt": "what should I consider buying in January that we might need in Febuary?", "summary": "Calculates the net requirement for items with demand in February, by comparing sales demand with open purchase order supply.", "sql": "WITH SalesDemand AS (SELECT l.ITEMNMBR, SUM(l.QUANTITY) AS Demand FROM SOP10200 l JOIN SOP10100 h ON l.SOPNUMBE = h.SOPNUMBE WHERE h.DOCDATE >= '2025-02-01' AND h.DOCDATE <= '2025-02-28' GROUP BY l.ITEMNMBR), OpenPurchaseOrders AS (SELECT ITEMNMBR, SUM(QTYORDER) AS Supply FROM POP10110 WHERE POLNESTA = 1 GROUP BY ITEMNMBR) SELECT i.ITEMNMBR, i.ITEMDESC, ISNULL(d.Demand, 0) AS FebruaryDemand, ISNULL(s.Supply, 0) AS OpenPOSupply, (ISNULL(d.Demand, 0) - ISNULL(s.Supply, 0)) AS NetRequirement FROM IV00101 i LEFT JOIN SalesDemand d ON i.ITEMNMBR = d.ITEMNMBR LEFT JOIN OpenPurchaseOrders s ON i.ITEMNMBR = s.ITEMNMBR WHERE ISNULL(d.Demand, 0) > 0 ORDER BY NetRequirement DESC", "params": [], "entities": {"intent": "planning", "month": 2, "year": 2025}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764959653, "prompt": "ok so what should I put in POs for today?", "summary": "Calculates the net requirement for items with demand today, by comparing sales demand with open purchase order supply.", "sql": "WITH SalesDemand AS (SELECT l.ITEMNMBR, SUM(l.QUANTITY) AS Demand FROM SOP10200 l JOIN SOP10100 h ON l.SOPNUMBE = h.SOPNUMBE WHERE h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY l.ITEMNMBR), OpenPurchaseOrders AS (SELECT ITEMNMBR, SUM(QTYORDER) AS Supply FROM POP10110 WHERE POLNESTA = 1 GROUP BY ITEMNMBR) SELECT i.ITEMNMBR, i.ITEMDESC, ISNULL(d.Demand, 0) AS TodayDemand, ISNULL(s.Supply, 0) AS OpenPOSupply, (ISNULL(d.Demand, 0) - ISNULL(s.Supply, 0)) AS NetRequirement FROM IV00101 i LEFT JOIN SalesDemand d ON i.ITEMNMBR = d.ITEMNMBR LEFT JOIN OpenPurchaseOrders s ON i.ITEMNMBR = s.ITEMNMBR WHERE ISNULL(d.Demand, 0) > 0 ORDER BY NetRequirement DESC", "params": ["2025-12-05", "2025-12-05"], "entities": {"intent": "planning", "date": "2025-12-05"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764962452, "prompt": "what is our current cost on calcium chloride", "summary": "Retrieves the current cost for calcium chloride.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for CALCIUMCHLORIDE. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "SELECT CURRCOST FROM IV00101 WHERE ITEMNMBR = ?", "params": ["CALCIUMCHLORIDE"], "entities": {"item": "CALCIUMCHLORIDE", "intent": "cost"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764962916, "prompt": "what is our current cost on Calcium chloride", "summary": "Retrieves the current cost for Calcium chloride.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for Calcium chloride. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "SELECT CURRCOST FROM IV00101 WHERE ITEMNMBR = ?", "params": ["Calcium chloride"], "entities": {"item": "Calcium chloride", "intent": "cost"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764970211, "prompt": "what is our monthly usage on NPKKNO3", "summary": "Calculates the total monthly usage for item NPKKNO3.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKKNO3.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS MonthlyUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKKNO3"], "entities": {"item": "NPKKNO3", "intent": "usage"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764970257, "prompt": "what was it in 2024?", "summary": "Calculates the total monthly usage for item NPKKNO3 for the year 2024.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKKNO3", "2024-01-01", "2024-12-31"], "entities": {"item": "NPKKNO3", "year": 2024, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764970548, "prompt": "what is our current cost vs our standard cost of citric acid?", "summary": "Retrieves current and standard cost for Citric Acid (CHECITRIC) using description/alias matching.", "sql": "DECLARE @needle NVARCHAR(100) = UPPER(?);\nSELECT TOP 1 ITEMNMBR, ITEMDESC, CURRCOST, STNDCOST\nFROM IV00101\nWHERE UPPER(ITEMNMBR) = @needle\n   OR UPPER(REPLACE(ITEMNMBR, ' ', '')) = @needle\n   OR UPPER(ITEMDESC) LIKE '%' + @needle + '%'\n   OR UPPER(ITEMDESC) LIKE '%CITRIC%ACID%'\nORDER BY CASE\n    WHEN UPPER(ITEMNMBR) = @needle THEN 0\n    WHEN UPPER(REPLACE(ITEMNMBR, ' ', '')) = @needle THEN 1\n    ELSE 2\nEND, ITEMNMBR;", "params": ["CITRIC ACID"], "entities": {"item": "CITRIC ACID", "intent": "cost"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764970793, "prompt": "what is our current cost vs our standard cost of citric acid?", "summary": "Retrieves current and standard cost for Citric Acid (CHECITRIC) using description/alias matching.", "sql": "DECLARE @needle NVARCHAR(100) = UPPER(?);\nSELECT TOP 1 ITEMNMBR, ITEMDESC, CURRCOST, STNDCOST\nFROM IV00101\nWHERE UPPER(ITEMNMBR) = @needle\n   OR UPPER(REPLACE(ITEMNMBR, ' ', '')) = @needle\n   OR UPPER(ITEMDESC) LIKE '%' + @needle + '%'\n   OR UPPER(ITEMDESC) LIKE '%CITRIC%ACID%'\nORDER BY CASE\n    WHEN UPPER(ITEMNMBR) = @needle THEN 0\n    WHEN UPPER(REPLACE(ITEMNMBR, ' ', '')) = @needle THEN 1\n    ELSE 2\nEND, ITEMNMBR;", "params": ["CITRIC ACID"], "entities": {"item": "CITRIC ACID", "intent": "cost"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764970855, "prompt": "what is our current cost of citric acid?", "summary": "Retrieves current and standard cost for Citric Acid (CHECITRIC) using description/alias matching.", "sql": "DECLARE @needle NVARCHAR(100) = UPPER(?);\nSELECT TOP 1 ITEMNMBR, ITEMDESC, CURRCOST, STNDCOST\nFROM IV00101\nWHERE UPPER(ITEMNMBR) = @needle\n   OR UPPER(REPLACE(ITEMNMBR, ' ', '')) = @needle\n   OR UPPER(ITEMDESC) LIKE '%' + @needle + '%'\n   OR UPPER(ITEMDESC) LIKE '%CITRIC%ACID%'\nORDER BY CASE\n    WHEN UPPER(ITEMNMBR) = @needle THEN 0\n    WHEN UPPER(REPLACE(ITEMNMBR, ' ', '')) = @needle THEN 1\n    ELSE 2\nEND, ITEMNMBR;", "params": ["CITRIC ACID"], "entities": {"item": "CITRIC ACID", "intent": "cost"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1764970960, "prompt": "what is our current cost of citric acid?", "summary": "Retrieves current and standard cost for Citric Acid (CHECITRIC) using description/alias matching.", "sql": "DECLARE @needle NVARCHAR(100) = UPPER(?);\nSELECT TOP 1 ITEMNMBR, ITEMDESC, CURRCOST, STNDCOST\nFROM IV00101\nWHERE UPPER(ITEMNMBR) = @needle\n   OR UPPER(REPLACE(ITEMNMBR, ' ', '')) = @needle\n   OR UPPER(ITEMDESC) LIKE '%' + @needle + '%'\n   OR UPPER(ITEMDESC) LIKE '%CITRIC%ACID%'\nORDER BY CASE\n    WHEN UPPER(ITEMNMBR) = @needle THEN 0\n    WHEN UPPER(REPLACE(ITEMNMBR, ' ', '')) = @needle THEN 1\n    ELSE 2\nEND, ITEMNMBR;", "params": ["CITRIC ACID"], "entities": {"item": "CITRIC ACID", "intent": "cost"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765208301, "prompt": "What was our monthly usage of NPKU32 in 2024", "summary": "Calculates the total monthly usage for item NPKU32 for the year 2024.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKU32", "2024-01-01", "2024-12-31"], "entities": {"item": "NPKU32", "year": 2024, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765208433, "prompt": "what was our usage of NPKU32 in 2024?", "summary": "Calculates the total monthly usage for item NPKU32 for the year 2024.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKU32", "2024-01-01", "2024-12-31"], "entities": {"item": "NPKU32", "year": 2024, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765377694, "prompt": "Use machine learning to determine when we should buy SO4FELIQ next", "summary": "Retrieves the current cost and description for item SO4FELIQ to assist in determining purchasing decisions.", "sql": "SELECT ITEMNMBR, ITEMDESC, CURRCOST FROM IV00101 WHERE ITEMNMBR = ?", "params": ["SO4FELIQ"], "entities": {"item": "SO4FELIQ", "intent": "purchase planning"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765377883, "prompt": "What was our usage on SO4FELIQ in 2024", "summary": "Calculates the total monthly usage for SO4FELIQ for the year 2024.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["SO4FELIQ", "2024-01-01", "2024-12-31"], "entities": {"item": "SO4FELIQ", "year": 2024, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765378001, "prompt": "Based on this usage history when will we likely run out of SO4FELIQ based on our current inventory?", "summary": "Calculates the estimated number of days until SO4FELIQ runs out based on average daily usage and current inventory.", "sql": "WITH MonthlyUsage AS (SELECT MONTH(h.DOCDATE) AS Month, SUM(ABS(t.TRXQTY)) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= '2024-01-01' AND h.DOCDATE <= '2024-12-31' GROUP BY MONTH(h.DOCDATE)), AverageDailyUsage AS (SELECT AVG(TotalUsage) / 30.0 AS AvgDailyUsage FROM MonthlyUsage), CurrentStock AS (SELECT SUM(QTYONHND - ATYALLOC) AS FreeStock FROM IV00102 WHERE ITEMNMBR = ?) SELECT FreeStock, AvgDailyUsage, CASE WHEN AvgDailyUsage > 0 THEN FreeStock / AvgDailyUsage ELSE NULL END AS DaysUntilRunOut FROM AverageDailyUsage, CurrentStock", "params": ["SO4FELIQ", "SO4FELIQ"], "entities": {"item": "SO4FELIQ", "intent": "inventory_analysis"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765379632, "prompt": "what was usage on SO4FELIQ in 2024?", "summary": "Calculates the total usage of SO4FELIQ for the year 2024.", "sql": "SELECT SUM(ABS(t.TRXQTY)) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ?", "params": ["SO4FELIQ", "2024-01-01", "2024-12-31"], "entities": {"item": "SO4FELIQ", "year": 2024, "intent": "usage"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765380833, "prompt": "based on our usage when should we buy SO4FELIQ again", "summary": "Determines whether to order SO4FELIQ based on recent usage and current stock levels.", "sql": "WITH RecentUsage AS (SELECT ABS(SUM(t.TRXQTY)) AS MonthlyUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= DATEADD(month, -3, ?) AND t.TRXQTY < 0), CurrentStock AS (SELECT SUM(QTYONHND - ATYALLOC) AS FreeStock FROM IV00102 WHERE ITEMNMBR = ?), RecommendedOrder AS (SELECT CASE WHEN ru.MonthlyUsage IS NOT NULL AND cs.FreeStock IS NOT NULL THEN CEILING((ru.MonthlyUsage - cs.FreeStock) / ru.MonthlyUsage) ELSE 0 END AS OrderQuantity FROM RecentUsage ru, CurrentStock cs) SELECT CASE WHEN OrderQuantity > 0 THEN 'Order now' ELSE 'Sufficient stock' END AS Recommendation FROM RecommendedOrder", "params": ["SO4FELIQ", "2025-12-10", "SO4FELIQ"], "entities": {"item": "SO4FELIQ", "intent": "reorder"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765384712, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765384788, "prompt": "Identify finished goods that use NPK3011", "summary": "Identifies finished goods that use NPK3011 as a component, along with their descriptions and quantities per finished good.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure.", "sql": "SELECT DISTINCT b.PPN_I AS FinishedGood, ip.ITEMDESC AS FinishedGoodDescription, b.CPN_I AS ComponentItem, ic.ITEMDESC AS ComponentDescription, b.QUANTITY_I AS QtyPerFinishedGood FROM BM010115 b JOIN IV00101 ip ON ip.ITEMNMBR = b.PPN_I JOIN IV00101 ic ON ic.ITEMNMBR = b.CPN_I WHERE b.CPN_I = ?", "params": ["NPK3011"], "entities": {"component": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765384792, "prompt": "Retrieve demand forecast for the identified finished goods", "summary": "Retrieves the total demand forecast for identified finished goods based on their bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure.", "sql": "SELECT b.PPN_I AS FinishedGood, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b JOIN IV00101 i ON i.ITEMNMBR = b.PPN_I WHERE b.BOMTYPE_I = 1 GROUP BY b.PPN_I", "params": [], "entities": {"intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765384844, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765385934, "prompt": "Identify finished goods that use NPK3011", "summary": "Identifies finished goods that use NPK3011 as a component in their bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011.", "sql": "SELECT DISTINCT b.PPN_I AS FinishedGood, ip.ITEMDESC AS FinishedGoodDescription FROM BM010115 b JOIN IV00101 ip ON ip.ITEMNMBR = b.PPN_I WHERE b.CPN_I = ?", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765385938, "prompt": "Retrieve demand forecast for the identified finished goods", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765386061, "prompt": "Based on our usage how much SO4FELIQ should we buy", "summary": "Calculates the suggested purchase quantity for SO4FELIQ based on average daily usage over the last 180 days.", "sql": "WITH RecentUsage AS (SELECT SUM(ABS(t.TRXQTY)) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= DATEADD(day, -180, ?)), AverageUsage AS (SELECT TotalUsage / 180.0 AS AvgDailyUsage FROM RecentUsage) SELECT ROUND(AvgDailyUsage * 30, 0) AS SuggestedPurchaseQty FROM AverageUsage", "params": ["SO4FELIQ", "2025-12-10"], "entities": {"item": "SO4FELIQ", "intent": "purchase"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765386416, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765386655, "prompt": "Identify finished goods that use NPK3011", "summary": "Identifies finished goods that use NPK3011 as a component in their bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011.", "sql": "SELECT DISTINCT b.PPN_I AS FinishedGood, ip.ITEMDESC AS FinishedGoodDescription FROM BM010115 b JOIN IV00101 ip ON ip.ITEMNMBR = b.PPN_I WHERE b.CPN_I = ?", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765386659, "prompt": "Retrieve the demand forecast for the identified finished goods", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765386910, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765392220, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765392419, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765392595, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765392778, "prompt": "Identify finished goods that use NPK3011", "summary": "Identifies finished goods that use NPK3011 as a component in their bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011.", "sql": "SELECT DISTINCT b.PPN_I AS FinishedGood, ip.ITEMDESC AS FinishedGoodDescription FROM BM010115 b JOIN IV00101 ip ON ip.ITEMNMBR = b.PPN_I WHERE b.CPN_I = ?", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765393914, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765394912, "prompt": "Identify finished goods that use NPK3011", "summary": "Identifies finished goods that use NPK3011 as a component in their bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011.", "sql": "SELECT DISTINCT b.PPN_I AS FinishedGood, ip.ITEMDESC AS FinishedGoodDescription FROM BM010115 b JOIN IV00101 ip ON ip.ITEMNMBR = b.PPN_I WHERE b.CPN_I = ?", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765394915, "prompt": "Retrieve demand forecast for the identified finished goods", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765395617, "prompt": "Identify finished goods that use NPK3011", "summary": "Identifies finished goods that use NPK3011 as a component in their bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011.", "sql": "SELECT DISTINCT b.PPN_I AS FinishedGood, ip.ITEMDESC AS FinishedGoodDescription FROM BM010115 b JOIN IV00101 ip ON ip.ITEMNMBR = b.PPN_I WHERE b.CPN_I = ?", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765395622, "prompt": "Retrieve the demand forecast for the identified finished goods", "summary": "Retrieves the demand forecast for the finished good NPK3011 over the last three months.", "sql": "WITH DemandForecast AS (SELECT l.ITEMNMBR, SUM(l.QUANTITY) AS TotalDemand FROM SOP10200 l JOIN SOP10100 h ON l.SOPNUMBE = h.SOPNUMBE WHERE h.DOCDATE >= DATEADD(month, -3, ?) AND h.DOCDATE <= ? AND l.ITEMNMBR = ? GROUP BY l.ITEMNMBR) SELECT i.ITEMNMBR, i.ITEMDESC, ISNULL(df.TotalDemand, 0) AS ForecastedDemand FROM IV00101 i LEFT JOIN DemandForecast df ON i.ITEMNMBR = df.ITEMNMBR WHERE i.ITEMNMBR = ?", "params": ["2025-09-01", "2025-12-10", "NPK3011", "NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765395788, "prompt": "What was our historical usage on PHOS ACID in January and Febuary", "summary": "Calculates the total historical usage for PHOS ACID for January and February 2025.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["PHOS ACID", "2025-01-01", "2025-02-28"], "entities": {"item": "PHOS ACID", "months": ["January", "February"], "year": 2025, "intent": "historical usage"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765395803, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765395857, "prompt": "what is our historical usage in January and Febuary'", "summary": "Calculates the total historical usage for item NPKU32 for January and February 2025.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKU32.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKU32", "2025-01-01", "2025-02-28"], "entities": {"item": "NPKU32", "month": [1, 2], "year": 2025, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765395912, "prompt": "can you do the average over the past 3 January and February's?", "summary": "Calculates the average usage for item NPKU32 for January and February over the past three years.", "sql": "WITH HistoricalUsage AS (SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE)) SELECT Month, AVG(TotalUsage) AS AverageUsage FROM HistoricalUsage GROUP BY Month ORDER BY Month", "params": ["NPKU32", "2022-01-01", "2024-02-28"], "entities": {"item": "NPKU32", "months": ["January", "February"], "years": [2022, 2023, 2024]}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765396148, "prompt": "Identify finished goods that use NPK3011", "summary": "Identifies finished goods that use NPK3011 as a component in their bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011.", "sql": "SELECT DISTINCT b.PPN_I AS FinishedGood, ip.ITEMDESC AS FinishedGoodDescription FROM BM010115 b JOIN IV00101 ip ON ip.ITEMNMBR = b.PPN_I WHERE b.CPN_I = ?", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765396154, "prompt": "Retrieve demand forecast for the identified finished goods", "summary": "Retrieves the demand forecast for the finished good NPK3011 over the last three months.", "sql": "WITH DemandForecast AS (SELECT l.ITEMNMBR, SUM(l.QUANTITY) AS TotalDemand FROM SOP10200 l JOIN SOP10100 h ON l.SOPNUMBE = h.SOPNUMBE WHERE h.DOCDATE >= DATEADD(month, -3, ?) AND h.DOCDATE <= ? GROUP BY l.ITEMNMBR) SELECT i.ITEMNMBR, i.ITEMDESC, ISNULL(df.TotalDemand, 0) AS ForecastedDemand FROM IV00101 i LEFT JOIN DemandForecast df ON i.ITEMNMBR = df.ITEMNMBR WHERE i.ITEMNMBR = ?", "params": ["2025-09-01", "2025-12-10", "NPK3011"], "entities": {"intent": "bom", "item": "NPK3011"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765396257, "prompt": "Identify finished goods that use NPK3011", "summary": "Identifies finished goods that use NPK3011 as a component, along with their descriptions.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure.", "sql": "SELECT DISTINCT b.PPN_I AS FinishedGood, ip.ITEMDESC AS FinishedGoodDescription, b.CPN_I AS ComponentItem, ic.ITEMDESC AS ComponentDescription FROM BM010115 b JOIN IV00101 ip ON ip.ITEMNMBR = b.PPN_I JOIN IV00101 ic ON ic.ITEMNMBR = b.CPN_I WHERE b.CPN_I = ?", "params": ["NPK3011"], "entities": {"component": "NPK3011", "intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765396261, "prompt": "Retrieve demand forecast for the identified finished goods", "summary": "Retrieves the total demand forecast for identified finished goods based on their bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure.", "sql": "SELECT b.PPN_I AS FinishedGood, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b JOIN IV00101 i ON i.ITEMNMBR = b.PPN_I WHERE i.ITEMTYPE = 1 GROUP BY b.PPN_I", "params": [], "entities": {"intent": "bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765396355, "prompt": "what is our usage on NPKU32 in 2024", "summary": "Calculates the total monthly usage for item NPKU32 for the year 2024.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKU32.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKU32", "2024-01-01", "2024-12-31"], "entities": {"item": "NPKU32", "year": 2024, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765396730, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765397198, "prompt": "What is our historical usage on NPKPHOS75 in JANUARY and Febuary for historical references use the past 3 years", "summary": "Calculates the total historical usage for item NPKPHOS75 in January and February over the past three years.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPKPHOS75.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKPHOS75", "2022-01-01", "2025-02-28"], "entities": {"item": "NPKPHOS75", "months": ["January", "February"], "years": [2023, 2024, 2025]}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765397309, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765397459, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765397787, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765398182, "prompt": "Retrieve the demand forecast for the identified finished goods.", "summary": "Retrieves the demand forecast for components of the finished good NPK3011 based on the bill of materials.\n\nBill of Materials page: Inventory > Inquiry > Bill of Materials shows the component structure for NPK3011. No component rows were returned; check the BOM screen to confirm whether the item has a defined bill or is stored under another site.", "sql": "WITH DemandForecast AS (SELECT b.CPN_I AS ComponentItem, SUM(b.QUANTITY_I) AS TotalDemand FROM BM010115 b WHERE b.PPN_I = ? GROUP BY b.CPN_I) SELECT df.ComponentItem, i.ITEMDESC, df.TotalDemand FROM DemandForecast df LEFT JOIN IV00101 i ON df.ComponentItem = i.ITEMNMBR", "params": ["NPK3011"], "entities": {"item": "NPK3011", "intent": "mfg_bom"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765400067, "prompt": "What was our Usage on NPKPHOS75 in January and February of 2025?", "summary": "Calculates the total usage for item NPKPHOS75 for January and February 2025.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKPHOS75", "2025-01-01", "2025-02-28"], "entities": {"item": "NPKPHOS75", "month": [1, 2], "year": 2025, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765400218, "prompt": "What was our Usage on NPKPHOS75 in January and February of 2024?", "summary": "Calculates the total usage for item NPKPHOS75 for January and February 2024.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month ASC", "params": ["NPKPHOS75", "2024-01-01", "2024-02-29"], "entities": {"item": "NPKPHOS75", "month": [1, 2], "year": 2024, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
{"timestamp": 1765400261, "prompt": "What was our Usage on NPKPHOS75 in January and February of 2023?", "summary": "Calculates the total usage for item NPKPHOS75 for January and February 2023.", "sql": "SELECT MONTH(h.DOCDATE) AS Month, SUM(CASE WHEN t.TRXQTY < 0 THEN -t.TRXQTY ELSE 0 END) AS TotalUsage FROM IV30300 t JOIN IV30200 h ON t.DOCNUMBR = h.DOCNUMBR AND t.DOCTYPE = h.IVDOCTYP WHERE t.ITEMNMBR = ? AND h.DOCDATE >= ? AND h.DOCDATE <= ? GROUP BY MONTH(h.DOCDATE) ORDER BY Month", "params": ["NPKPHOS75", "2023-01-01", "2023-02-28"], "entities": {"item": "NPKPHOS75", "month": [1, 2], "year": 2023, "intent": "report"}, "route": "erp_sql", "source": "llm_sql_generator"}
